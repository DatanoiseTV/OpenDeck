{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "[FW/BTLDR] Build",
            "command": "compiledb -d . make TARGETNAME=${input:target} LANG=C",
            "type": "shell",
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            }
        },
        {
            "label": "[FW/BTLDR] Clean",
            "command": "make clean",
            "type": "shell",
            "problemMatcher": []
        },
        {
            "label": "[Tests] Build",
            "command": "cd tests && make pre-build && make TESTS=${input:test}",
            "type": "shell",
            "problemMatcher": [
                "$gcc"
            ]
        },
        {
            "label": "[Tests] Clean",
            "command": "cd tests && make clean",
            "type": "shell",
            "problemMatcher": []
        },
        {
            "label": "[Tests] Run compiled",
            "command": "cd tests && make exec",
            "type": "shell",
            "problemMatcher": []
        },
        {
            "label": "[VSCode] Update intellisense",
            "command": "chmod +x ../scripts/vscode_intellisense.sh && ../scripts/vscode_intellisense.sh ${input:target}",
            "type": "shell",
            "problemMatcher": []
        }
    ],
    "inputs": [
        {
            "id": "target",
            "type": "pickString",
            "default": "fw_opendeck",
            "description": "Select target for which to build:",
            "options": [
                "fw_opendeck",
                "fw_leonardo",
                "fw_mega",
                "fw_pro_micro",
                "fw_uno",
                "fw_teensy2pp",
                "fw_kodama",
                "fw_tannin",
                "fw_bergamot",
                "fw_16u2",
                "fw_8u2",
                "fw_mega6mux",
                "boot_opendeck",
                "boot_leonardo",
                "boot_pro_micro",
                "boot_mega",
                "boot_uno",
                "boot_teensy2pp",
                "boot_kodama",
                "boot_tannin",
                "boot_bergamot",
                "boot_16u2 VARIANT=VARIANT_MEGA",
                "boot_16u2 VARIANT=VARIANT_UNO"
            ]
        },
        {
            "id": "test",
            "type": "pickString",
            "default": "database",
            "description": "Select test to build:",
            "options": [
                "database",
                "encoders",
                "pots"
            ]
        }
    ]
}